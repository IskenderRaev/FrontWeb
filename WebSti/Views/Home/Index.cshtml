@{
    ViewData["Title"] = "Главная";
}

@await Component.InvokeAsync("TypeOfPerson")

@*........................Гайд...............................*@
<h3 class="Headers"> </h3>

<div class="container">
    <div class="row mt-3">
        <div class="row  justify-content-between">
            <div class="col-sm-6 col-md-4 Linked">
                <div class="Link">
                    <div class=" card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/guide_1.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="Index" asp-controller="Guide" class="font-weight-bold text-center text-primary m-0">Как зарегистрироваться в качестве индивидуального предпринимателя? </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked">
                <div class="Link">
                    <div class=" card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4 col-lg-4">
                                <img class="Linkimg" src="~/images/guide_2.png" />
                            </div>
                            <div class="col-9 col-sm-8 col-lg-8">
                                <a asp-action="LegalEntity" asp-controller="Guide" class="font-weight-bold text-center text-primary m-0">Как открыть юридическое лицо? </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/guide_3.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="registerindividual" asp-controller="Guide" class="font-weight-bold text-center text-primary m-0">Как пройти регистрацию физического лица? </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked mt-2">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/guide_4.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="ElectronicSignature" asp-controller="Guide" class="font-weight-bold text-center text-primary m-0">Как и где налого- плательщику получить электронную подпись?</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked mt-2">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/guide_5.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="HowToAccess" asp-controller="Guide" class="font-weight-bold text-center text-primary m-0">Как налогоплательщику получить доступ в ИС «ЭСФ» и другие системы?</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked mt-2">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/guide_6.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="getpersonalaccount" asp-controller="Guide" class="font-weight-bold text-center text-primary m-0">Как налогоплательщику получить доступ в личный кабинет?</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row mt-4 ">
    <div class="col-sm-12 col-md-12 col-lg-7  col-xl-8 h-100">
        <a asp-controller="News" asp-action="Index"><h3 class="Headers pb-2">@Localize("news")</h3></a>
        <hr />
        @await Component.InvokeAsync("ActualNewsPictures")
    </div>
    <div class="col-sm-12 col-md-12  col-lg-5 col-xl-4 container">
        <h3 class="Headers pb-2">@Localize("payercalendar")</h3>
        <hr />
        <div id="container" class="mt-3 MainCalendar" style="background: #fff; border: solid 1px rgba(0, 0, 0, 0.1); border-bottom:none;"></div>
        <div class="row" style=" padding-right: 15px; padding-left: 15px;">
            <div class="col-4" style="background-color: white; border: solid 1px rgba(0, 0, 0, 0.1); border-right:none; padding-right: 15px; padding-left: 15px;">
                <img class="" style="max-width: 95%; max-height: 95%;" src="~/images/kalendar.png" />
            </div>
            <div class="col-8" style="display: table;background-color: white; border: solid 1px rgba(0, 0, 0, 0.1); border-left:none;">
                <a asp-action="GetFile"  style=" vertical-align: middle; display: table-cell; color:black;">
                    @Localize("downloadcalendar")
                </a>
            </div>
        </div>
    </div>
</div>
<div class="row my-4 mt-5">
    <div class="col-sm-8">
        <h3 class="Headers ">@Localize("latestnews")</h3>
        <hr />
        @await Component.InvokeAsync("LastNews")
    </div>
    <div class="col-sm-4">
        <h3 class="Headers ">@Localize("сurrentnews")</h3>
        <hr />
        @await Component.InvokeAsync("ActualNews")
    </div>
</div>
@*........................Обращения...............................*@
<h3 class="Headers ">@Localize("appeals")</h3>
<hr />
<div class="container">
    <div class="row mt-3">
        <div class="row  justify-content-between">
            <div class="col-sm-6 col-md-4 Linked">
                <div class="Link">
                    <div class=" card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/speaker.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="Questionnaire" asp-controller="Home" class="font-weight-bold text-center text-primary m-0">@Localize("questionnaire")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked">
                <div class="Link">
                    <div class=" card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4 col-lg-4">
                                <img class="Linkimg" src="~/images/marked.png" />
                            </div>
                            <div class="col-9 col-sm-8 col-lg-8">
                                <a asp-action="AcceptanceOfProposals" asp-controller="Home" class="font-weight-bold text-center text-primary m-0">@Localize("offer")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>            
            <div class="col-sm-6 col-md-4 Linked">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/live.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="PersonalReceptionOfCitizens" asp-controller="Home" class="font-weight-bold text-center text-primary m-0">@Localize("selfinvite")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked mt-2">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/appeal_4.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="BoxAndBookOfComplaintsAndSuggestions" asp-controller="Home" class="font-weight-bold text-center text-primary m-0">@Localize("complaints")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked mt-2">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/appeal_5.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="ConsiderationOfСitizens" asp-controller="Home" class="font-weight-bold text-center text-primary m-0">@Localize("reviewappeals")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 Linked mt-2">
                <div class="Link">
                    <div class="card baseBlock">
                        <div class="Links row align-items-center">
                            <div class="col-3 col-sm-4">
                                <img class="Linkimg" src="~/images/appeal_6.png" />
                            </div>
                            <div class="col-9 col-sm-8">
                                <a asp-action="HelpLine" asp-controller="Home" class="font-weight-bold text-center text-primary m-0">@Localize("helpline")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@*........................Другие разделы..............................*@
@await Component.InvokeAsync("ExtraNavs")

@*........................Полезные ссылки.............................*@
@await Component.InvokeAsync("UsefulLinks")

@*........................Другие ссылки...............................*@
@await Component.InvokeAsync("OtherLinks")

@section Styles {
    <environment names="Development,Staging,Production">
        <link rel="stylesheet" href="~/lib/jquery-footable/css/footable.core.min.css" />
        <link href="~/lib/select2/css/select2.min.css" rel="stylesheet" />
        <link href="~/lib/select2-bootstrap-theme/select2-bootstrap.css" rel="stylesheet" />
    </environment>
}    

@section Scripts{
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/lib/animated-event-calendar/dist/jquery.simple-calendar.js"></script>

    <script>
        
        $(document).ready(function () {            
            var eventFromAjax=[];
            $.ajax({
                type: 'Get',
                url: '/Home/GetAllEvents',
                success: function (doc) {
                     eventFromAjax = $.map(doc, function (title) {
                        return {
                            startDate: title.notificationDate,
                            endDate: title.notificationDate,
                            summary: title.title
                        };
                    });
                    var events = eventFromAjax;
                    $calendar.setEvents(eventFromAjax);
                },
                error: function (request, status, error) {
                    console.log(status);
                }
            });
            var cultureName = $('#culture').find(":selected").val();
            var month = new Array();
            var week = new Array();
            let monthEN = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];
            let monthRU = ['январь', 'февраль', 'март', 'апрель', 'май', 'июнь', 'июль', 'август', 'сентябрь', 'октябрь', 'ноябрь', 'декабрь'];
            let monthKG = ['Үчтүн айы', 'Бирдин айы', 'Жалган Куран', 'Чын Куран', 'Бугу', 'Кулжа', 'Теке', 'Баш Оона', 'Аяк Оона', 'Тогуздун айы', 'Жетинин айы', 'Бештин айы'];
            let weekEN = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
            let weekRU = ['вс', 'пн', 'вт', 'ср', 'чт', 'пт', 'сб'];
            let weekKG = ['жек', 'дүй', 'шей', 'шар', 'бей', 'жума', 'иш'];
            if (cultureName == 'en-EN') {
                month = monthEN;
                week = weekEN;
            }
            else if (cultureName == 'ru-RU') {
                month = monthRU;
                week = weekRU;
            }
            else{
                month = monthKG;
                week = weekKG;
            }
            $("#container").simpleCalendar({
                displayEvent: true,
                displayYear: true,
                months: month,
                days: week,
                disableEmptyDetails: true

            });            
            var container = $("#container").simpleCalendar({
                // ...
            });
            let $calendar = container.data('plugin_simpleCalendar')
        });
        

        $('#carouselExample').on('slide.bs.carousel', function (e) {
            var $e = $(e.relatedTarget);
            var idx = $e.index();
            var itemsPerSlide = 1;
            var totalItems = $('.carousel-item').length;

            if (idx >= totalItems - (itemsPerSlide - 1)) {
                var it = itemsPerSlide - (totalItems - idx);
                for (var i = 0; i < it; i++) {
                    // append slides to end
                    if (e.direction == "left") {
                        $('.carousel-item').eq(i).appendTo('.carousel-inner');
                    }
                    else {
                        $('.carousel-item').eq(0).appendTo('.carousel-inner');
                    }
                }
            }
        });
        $(document).ready(function () {
            /* show lightbox when clicking a thumbnail */
            $('a.thumb').click(function (event) {
                event.preventDefault();
                var content = $('.modal-body');
                content.empty();
                var title = $(this).attr("title");
                $('.modal-title').html(title);
                content.html($(this).html());
                $(".modal-profile").modal({ show: true });
            });

            const swiper = new Swiper('.swiper', {
                // Optional parameters
                direction: 'horizontal',
                slidesPerView: 1,
                spaceBetween: 10,
                loop: true,
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                breakpoints: {
                    400: {
                        slidesPerView: 2,
                        spaceBetween: 10,
                    },
                    640: {
                        slidesPerView: 2,
                        spaceBetween: 20,
                    },
                    768: {
                        slidesPerView: 3,
                        spaceBetween: 40,
                    },
                    1024: {
                        slidesPerView: 4,
                        spaceBetween: 40,
                    },
                    1440: {
                        slidesPerView: 5,
                        spaceBetween: 50,
                    },
                },
            });
        });
    </script>

}
